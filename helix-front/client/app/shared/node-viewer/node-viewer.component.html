<section class="node-viewer" fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="10px">
  <md-button-toggle-group #group="mdButtonToggleGroup" value="table">
    <md-button-toggle value="table">
      Table View
    </md-button-toggle>
    <md-button-toggle value="json">
      JSON View
    </md-button-toggle>
  </md-button-toggle-group>
  <section class="viewer" [ngSwitch]="group.value" fxFlexFill>
    <ngx-json-viewer *ngSwitchCase="'json'" [json]="obj"></ngx-json-viewer>
    <section *ngSwitchCase="'table'">

      <!-- TODO vxu: use md-simple-table when it's available -->

      <section fxLayout="row" fxLayoutAlign="center center">
        <md-icon>search</md-icon>
        <md-input-container>
          <input mdInput
            placeholder="Type to filter the fields..."
            (keyup)="updateFilter($event)"/>
        </md-input-container>
      </section>
      <md-card>
        <md-card-header>
          <md-card-title>
            Simple Fields
            <span *ngIf="simpleConfigs.length == 0">is empty.</span>
            <span *ngIf="keyword" class="primary">(filtered)</span>
          </md-card-title>
        </md-card-header>
        <md-card-content>
          <ngx-datatable
            *ngIf="simpleConfigs.length"
            #simpleTable
            class="material"
            [headerHeight]="rowHeight"
            rowHeight="auto"
            [footerHeight]="rowHeight"
            columnMode="force"
            [rows]="simpleConfigs"
            [sorts]="sorts"
            [limit]="20">
            <ngx-datatable-column name="Name" [cellClass]="getNameCellClass"></ngx-datatable-column>
            <ngx-datatable-column name="Value"></ngx-datatable-column>
          </ngx-datatable>
        </md-card-content>
      </md-card>
      <md-card>
        <md-card-header>
          <md-card-title>
            List Fields
            <span *ngIf="listConfigs.length == 0">is empty.</span>
            <span *ngIf="keyword" class="primary">(filtered)</span>
          </md-card-title>
        </md-card-header>
        <md-card-content>
          <ngx-datatable
            *ngIf="listConfigs.length"
            #listTable
            class="material"
            [headerHeight]="rowHeight"
            rowHeight="auto"
            [footerHeight]="rowHeight"
            columnMode="force"
            [rows]="listConfigs"
            [sorts]="sorts"
            [limit]="10">
            <ngx-datatable-column name="Name" [width]="80" [cellClass]="getNameCellClass"></ngx-datatable-column>
            <ngx-datatable-column name="Value" [width]="400">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <ngx-datatable
                  class="material"
                  [headerHeight]="rowHeight"
                  rowHeight="auto"
                  columnMode="force"
                  [rows]="value">
                  <ngx-datatable-column name="Value"></ngx-datatable-column>
                </ngx-datatable>
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>
        </md-card-content>
      </md-card>
      <md-card>
        <md-card-header>
          <md-card-title>
            Map Fields
            <span *ngIf="mapConfigs.length == 0">is empty.</span>
            <span *ngIf="keyword" class="primary">(filtered)</span>
          </md-card-title>
        </md-card-header>
        <md-card-content>
          <ngx-datatable
            *ngIf="mapConfigs.length"
            #mapTable
            class="material"
            [headerHeight]="rowHeight"
            rowHeight="auto"
            [footerHeight]="rowHeight"
            columnMode="force"
            [rows]="mapConfigs"
            [sorts]="sorts"
            [limit]="10">
            <ngx-datatable-column name="Name" [width]="80" [cellClass]="getNameCellClass"></ngx-datatable-column>
            <ngx-datatable-column name="Value" [width]="500">
              <ng-template let-value="value" ngx-datatable-cell-template>
                <ngx-datatable
                  class="material"
                  [headerHeight]="rowHeight"
                  rowHeight="auto"
                  columnMode="force"
                  [rows]="value"
                  [sorts]="sorts">
                  <ngx-datatable-column name="Name"></ngx-datatable-column>
                  <ngx-datatable-column name="Value"></ngx-datatable-column>
                </ngx-datatable>
              </ng-template>
            </ngx-datatable-column>
          </ngx-datatable>
        </md-card-content>
      </md-card>
    </section>
  </section>
</section>
